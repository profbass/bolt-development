{# Footer #}
<footer role="contentinfo" class="footer">
    <div class="container">
        <nav class="level" role="navigation" aria-label="footer navigation">
            <div class="level-left">
                <div class="level-item">
                    <p>
                        &copy; {{ "now"|date("Y") }} &bullet;
                        {{ __("This website is <a href='%url%' target='_blank' title='Sophisticated, lightweight & simple CMS'>Built with Bolt</a>.", {'%url%':'https://bolt.cm'}) }}
                    </p>
                </div>
            </div>
            <div class="level-right">
                {{ menu(
                    identifier = 'main',
                    template = 'partials/_sub_menu_footer.twig',
                    params = {'withsubmenus': false}
                ) }}
            </div>
        </nav>
        {{ widgets('footer') }}
    </div>
</footer>

<script defer src="https://use.fontawesome.com/releases/v5.3.1/js/all.js"></script>
<script src="{{ asset('js/normalizeBrightness.js', 'theme') }}"></script>
<script src="{{ asset('js/app.js', 'theme') }}"></script>

<script>
    

    jQuery(document).ready(function ($) {
        function notificationMessage(){
            document.addEventListener('DOMContentLoaded', () => {
                (document.querySelectorAll('.notification .delete') || []).forEach(($delete) => {
                    $notification = $delete.parentNode;
                    $delete.preventDefault();
                    $delete.addEventListener('click', () => {
                    $notification.parentNode.removeChild($notification);
                    });
                });
            });
        }

        $('#contact-form').on('submit', function (e) {
            e.preventDefault();
            console.log("You hit it");
            var $form = $(this);
            var $body = $('.form-message');
            $.ajax({url: $form.attr('action'), type: "POST", data: $form.serialize()}).done(function () {
                $form.find('input,textarea').val('');
                $body.append('<div class="notification is-primary"><button class="delete"></button>Thanks for reaching out! We will return your message shortly.</div>');

            }).fail(function () {
                $body.append('<div class="notification is-danger"><button class="delete"></button>Oops! It broke!</div>');
                notificationMessage();
            });
        });
    });
    </script>


{% block footer %}{% endblock footer %}
